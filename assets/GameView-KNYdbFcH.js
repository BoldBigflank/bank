import{d as I,b as w,r as x,w as A,t as i,e as _,o as h,f as v,g as a,h as n,u as s,i as r,j as g,a as b,c as y,k as $,F as L,l as E}from"./index-JG6iyJAk.js";const T="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M12%202C6.5%202%202%206.5%202%2012S6.5%2022%2012%2022%2022%2017.5%2022%2012%2017.5%202%2012%202M17%2017H7V15H17V17M8%2014V11H10V14H8M11%2014V11H13V14H11M14%2014V11H16V14H14M17%2010H7V8.5L12%206L17%208.5V10Z'%20/%3e%3c/svg%3e",D=I("bank",{state:()=>({players:[],state:"setup",turn:0,roll:"",rollCount:0,bank:0,round:0,maxRounds:10,history:[]}),getters:{currentPlayer(t){const e=t.players[t.turn];return e||{name:""}},allPlayersBanked(t){return t.players.every(e=>e.banked)},canBank(t){return t.rollCount>2&&t.state==="progress"}},actions:{newGame(){this.players=[],this.state="setup",this.turn=0,this.roll="",this.rollCount=0,this.bank=0,this.round=0,this.maxRounds=10,this.history=[]},addPlayer(t){this.players.push({name:t,score:0,banked:!1})},startGame(){this.state="progress",this.round=0},bankPlayer(t){this.players[t].banked=!0},nextPlayerTurn(){for(this.turn=(this.turn+1)%this.players.length;this.players[this.turn].banked;)this.turn=(this.turn+1)%this.players.length;this.rollCount+=1},addBank(t){this.bank+=t,this.addHistory(`added ${t} to the bank`)},doubleBank(){this.bank*=2,this.addHistory("doubled the bank")},playerBanked(t){this.players[t].score+=this.bank,this.players[t].banked=!0,this.addHistory(`${this.players[t].name} banked`)},endRound(){this.players=this.players.map(t=>({...t,banked:!1})),this.bank=0,this.round+=1,this.rollCount=0,this.round===this.maxRounds&&(this.state="end"),this.addHistory("ended the round")},addHistory(t){this.history.push({name:this.currentPlayer.name,action:t})}},persist:!0}),V=()=>Math.floor(Math.random()*6)+1,F=w({__name:"AnimateInteger",props:{value:{type:Number,default:0},speed:{type:Number,default:5}},setup(t){const e=t,l=x(e.value);let m;return A(()=>e.value,f=>{clearInterval(m),f!==l.value&&(m=setInterval(()=>{if(Math.floor(l.value)!==Math.floor(f)){var c=(f-l.value)/e.speed;c=c>=0?Math.ceil(c):Math.floor(c),l.value=l.value+c}else l.value=f,clearInterval(m)},20))}),(f,c)=>i(l.value)}}),j={class:"bankInfo"},U=b("img",{src:T,class:"bankInfoIcon"},null,-1),Z={class:"bankInfoAmount"},q={key:0},z={key:1},J={key:2},O=w({__name:"GameView",setup(t){const e=D(),l=x("");function m(){l.value&&(e.addPlayer(l.value),l.value="")}function f(){e.players.length!==0&&e.startGame()}function c(){e.newGame()}function H(){const u=V(),o=V();e.roll=`${u} ${o}`,e.rollCount<3?u+o===7?e.addBank(70):e.addBank(u+o):u+o===7?e.endRound():u===o?e.doubleBank():e.addBank(u+o),e.nextPlayerTurn()}function M(u){e.playerBanked(u),e.allPlayersBanked&&e.endRound()}return(u,o)=>{const k=_("v-btn"),d=_("v-col"),B=_("v-row"),C=_("v-container"),P=_("v-list-item"),R=_("v-list"),N=_("v-text-field"),S=_("v-form");return h(),v(C,{class:"game"},{default:a(()=>[n(B,null,{default:a(()=>[n(d,{cols:"12"},{default:a(()=>[s(e).state!=="setup"?(h(),v(k,{key:0,onClick:c},{default:a(()=>[r("New Game")]),_:1})):g("",!0)]),_:1}),n(d,{cols:"12"},{default:a(()=>[b("div",j,[U,b("div",Z,[n(F,{value:s(e).bank,speed:5},null,8,["value"])])])]),_:1})]),_:1}),n(R,null,{default:a(()=>[(h(!0),y(L,null,$(s(e).players,(p,G)=>(h(),v(P,{key:p.name},{default:a(()=>[n(C,null,{default:a(()=>[n(B,null,{default:a(()=>[n(d,null,{default:a(()=>[r(i(p.name),1)]),_:2},1024),n(d,null,{default:a(()=>[r(i(p.score),1)]),_:2},1024),n(d,null,{default:a(()=>[!p.banked&&s(e).canBank?(h(),v(k,{key:0,onClick:()=>M(G)},{default:a(()=>[r("Bank")]),_:2},1032,["onClick"])):g("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1}),b("div",null,[s(e).state==="setup"?(h(),y("div",q,[r(" Setup Actions "),n(S,{onSubmit:[m,o[1]||(o[1]=E(()=>{},["prevent"]))]},{default:a(()=>[n(N,{modelValue:l.value,"onUpdate:modelValue":o[0]||(o[0]=p=>l.value=p),label:"Name"},null,8,["modelValue"]),n(k,{onClick:m},{default:a(()=>[r("Add Player")]),_:1})]),_:1}),n(k,{onClick:f},{default:a(()=>[r("Start Game")]),_:1})])):s(e).state==="progress"?(h(),y("div",z,[n(C,null,{default:a(()=>[n(B,null,{default:a(()=>[n(d,null,{default:a(()=>[r("Round "+i(s(e).round)+"/"+i(s(e).maxRounds)+" (Roll "+i(s(e).rollCount)+")",1)]),_:1}),n(d,null,{default:a(()=>[r(i(s(e).currentPlayer.name)+" turn",1)]),_:1}),n(d,null,{default:a(()=>[n(k,{onClick:H},{default:a(()=>[r("Roll")]),_:1})]),_:1}),n(d,null,{default:a(()=>[r("Roll "+i(s(e).roll),1)]),_:1})]),_:1})]),_:1})])):(h(),y("div",J,"ELSE "+i(s(e).state),1))])]),_:1})}}});export{O as default};
