import{d as I,b as V,r as H,w as N,t as d,e as _,o as h,f as C,g as a,h as n,a as y,u as o,c as k,i as A,F as G,j as r,k as $,l as L}from"./index-j7uNAwlL.js";const E="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M12%202C6.5%202%202%206.5%202%2012S6.5%2022%2012%2022%2022%2017.5%2022%2012%2017.5%202%2012%202M17%2017H7V15H17V17M8%2014V11H10V14H8M11%2014V11H13V14H11M14%2014V11H16V14H14M17%2010H7V8.5L12%206L17%208.5V10Z'%20/%3e%3c/svg%3e",T=I("bank",{state:()=>({players:[],state:"setup",turn:0,roll:"",rollCount:0,bank:0,round:0,maxRounds:10,history:[]}),getters:{currentPlayer(t){const e=t.players[t.turn];return e||{name:""}},allPlayersBanked(t){return t.players.every(e=>e.banked)},canBank(t){return t.rollCount>2&&t.state==="progress"}},actions:{addPlayer(t){this.players.push({name:t,score:0,banked:!1})},startGame(){this.state="progress",this.round=0},bankPlayer(t){this.players[t].banked=!0},nextPlayerTurn(){for(this.turn=(this.turn+1)%this.players.length;this.players[this.turn].banked;)this.turn=(this.turn+1)%this.players.length;this.rollCount+=1},addBank(t){this.bank+=t,this.addHistory(`added ${t} to the bank`)},doubleBank(){this.bank*=2,this.addHistory("doubled the bank")},playerBanked(t){this.players[t].score+=this.bank,this.players[t].banked=!0,this.addHistory(`${this.players[t].name} banked`)},endRound(){this.players=this.players.map(t=>({...t,banked:!1})),this.bank=0,this.round+=1,this.rollCount=0,this.round===this.maxRounds&&(this.state="end"),this.addHistory("ended the round")},addHistory(t){this.history.push({name:this.currentPlayer.name,action:t})}}}),g=()=>Math.floor(Math.random()*6)+1,D=V({__name:"AnimateInteger",props:{value:{type:Number,default:0},speed:{type:Number,default:5}},setup(t){const e=t,l=H(e.value);let m;return N(()=>e.value,f=>{clearInterval(m),f!==l.value&&(m=setInterval(()=>{if(Math.floor(l.value)!==Math.floor(f)){var i=(f-l.value)/e.speed;i=i>=0?Math.ceil(i):Math.floor(i),l.value=l.value+i}else l.value=f,clearInterval(m)},20))}),(f,i)=>d(l.value)}}),F={class:"bankInfo"},j=y("img",{src:E,class:"bankInfoIcon"},null,-1),U={class:"bankInfoAmount"},Z={key:0},q={key:1},z={key:2},K=V({__name:"GameView",setup(t){const e=T(),l=H("");function m(){l.value&&(e.addPlayer(l.value),l.value="")}function f(){e.players.length!==0&&e.startGame()}function i(){const u=g(),s=g();e.roll=`${u} ${s}`,e.rollCount<3?u+s===7?e.addBank(70):e.addBank(u+s):u+s===7?e.endRound():u===s?e.doubleBank():e.addBank(u+s),e.nextPlayerTurn()}function x(u){e.playerBanked(u),e.allPlayersBanked&&e.endRound()}return(u,s)=>{const c=_("v-col"),b=_("v-row"),v=_("v-btn"),B=_("v-container"),M=_("v-list-item"),P=_("v-list"),R=_("v-text-field"),w=_("v-form");return h(),C(B,{class:"game"},{default:a(()=>[n(b,null,{default:a(()=>[n(c,{cols:"12"},{default:a(()=>[y("div",F,[j,y("div",U,[n(D,{value:o(e).bank,speed:5},null,8,["value"])])])]),_:1})]),_:1}),n(P,null,{default:a(()=>[(h(!0),k(G,null,A(o(e).players,(p,S)=>(h(),C(M,{key:p.name},{default:a(()=>[n(B,null,{default:a(()=>[n(b,null,{default:a(()=>[n(c,null,{default:a(()=>[r(d(p.name),1)]),_:2},1024),n(c,null,{default:a(()=>[r(d(p.score),1)]),_:2},1024),n(c,null,{default:a(()=>[!p.banked&&o(e).canBank?(h(),C(v,{key:0,onClick:()=>x(S)},{default:a(()=>[r("Bank")]),_:2},1032,["onClick"])):L("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1}),y("div",null,[o(e).state==="setup"?(h(),k("div",Z,[r(" Setup Actions "),n(w,{onSubmit:[m,s[1]||(s[1]=$(()=>{},["prevent"]))]},{default:a(()=>[n(R,{modelValue:l.value,"onUpdate:modelValue":s[0]||(s[0]=p=>l.value=p),label:"Name"},null,8,["modelValue"]),n(v,{onClick:m},{default:a(()=>[r("Add Player")]),_:1})]),_:1}),n(v,{onClick:f},{default:a(()=>[r("Start Game")]),_:1})])):o(e).state==="progress"?(h(),k("div",q,[n(B,null,{default:a(()=>[n(b,null,{default:a(()=>[n(c,null,{default:a(()=>[r("Round "+d(o(e).round)+"/"+d(o(e).maxRounds)+" (Roll "+d(o(e).rollCount)+")",1)]),_:1}),n(c,null,{default:a(()=>[r(d(o(e).currentPlayer.name)+" turn",1)]),_:1}),n(c,null,{default:a(()=>[n(v,{onClick:i},{default:a(()=>[r("Roll")]),_:1})]),_:1}),n(c,null,{default:a(()=>[r("Roll "+d(o(e).roll),1)]),_:1})]),_:1})]),_:1})])):(h(),k("div",z,"ELSE "+d(o(e).state),1))])]),_:1})}}});export{K as default};
